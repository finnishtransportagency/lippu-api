swagger: "2.0"
info:
  description: "Transport Code broughts together legal provisions on transport market under one act. \
                The LIPPU-project was created to help transport operators enable Mobility as a Service (MaaS) capabilities. \
                This is API specification of LIPPU-project. NOTE, The ticket payment capabilities are scoped out from LIPPU-project."
  version: "0.1"
  title: "Lippu"
host: "localhost"
basePath: "/stubs"
schemes:
- "http"
- "https"
paths:
  /auth/init:
    post:
      tags:
      - "login"
      summary: "Initiates authentication process"
      description: ""
      operationId: "initAuth"
      consumes:
      - "application/json"
      - "application/xml"
      produces:
      - "application/json"
      - "application/xml"
      parameters:
      - in: header
        name: X-Message-Id
        type: string
        required: true
        description: "Unique message identification that is used for error situations. Every client implementation will create its own message ids."
      - in: header
        name: X-Transaction-Id
        type: string
        required: true
        description: "Unique transaction identification that is used for error situations. \
                      Value is generated by original requestor and used in every message related to same ticket transaction."
      - in: header
        name: X-Initiator
        type: string
        required: true
        description: "Text indentification of original requestor. Value is use for error situations."

      - in: "body"
        name: "body"
        description: "Company account identification"
        required: true
        schema:
          $ref: "#/definitions/AccountId"
      responses:
        200:
          description: "Server side authentication nonce value."
        403:
          description: "Company account does not exists or valid authentication token could not be generated."
        405:
          description: "Invalid company account."
  /auth/commit:
    post:
      tags:
      - "login"
      summary: "Creates valid authentication token"
      description: ""
      operationId: "commitAuth"
      consumes:
      - "application/json"
      - "application/xml"
      produces:
      - "application/json"
      - "application/xml"
      parameters:
      - in: header
        name: X-Message-Id
        type: string
        required: true
        description: "Unique message identification that is used for error situations. Every client implementation will create its own message ids."
      
      - in: header
        name: X-Transaction-Id
        type: string
        required: true
        description: "Unique transaction identification that is used for error situations. \
                      Value is generated by original requestor and used in every message related to same ticket transaction."
      - in: header
        name: X-Initiator
        type: string
        required: true
        description: "Text indentification of original requestor. Value is use for error situations."

      - in: "body"
        name: "body"
        description: "Input for validating authentication request."
        required: true
        schema:
          $ref: "#/definitions/AuthenticationRequest"
      responses:
        200:
          description: "[JWT](https://jwt.io/) authentication token for making authorized requests."
          schema:
            $ref: "#/definitions/AuthToken"
        403:
          description: "Authentication failed"
        405:
          description: "Input error"

  /products/{date}:
    get:
      tags:
      - "availability"
      summary: "Porduct portfolio for given datetime."
      description: "Returns product portfolio of transport operator that is valid on given datetime.\
                    As product offerings can change over time, and some products may be seasonal, \
                    the date is always part of the search process. If the search parameter {date} \
                    is left unchecked, then the time of the query is assumed as a time."
      operationId: "products"
      produces:
        - "application/json"
        - "application/xml"
      parameters:
        - in: header
          name: X-Message-Id
          type: string
          required: true
          description: "Unique message identification that is used for error situations. Every client implementation will create its own message ids."
        
        - in: header
          name: X-Transaction-Id
          type: string
          required: true
          description: "Unique transaction identification that is used for error situations. \
                      Value is generated by original requestor and used in every message related to same ticket transaction."
        - in: header
          name: X-Initiator
          type: string
          required: true
          description: "Text indentification of original requestor. Value is use for error situations."

        - in: header
          name: X-Initiator
          type: string
          required: true
          description: "Text indentification of original requestor. Value is use for error situations."

        - in: header
          name: Authorization
          type: string
          required: true
          description: "JWT authentication token for authorization requests."
          
        - in: path
          name: date
          description: "Datetime value when returned product portfolio is valid. If date is not given, current datetime is used."
          required: false
          type: string
          format: "date-time"

      responses:
        200:
          description: "Returns product portfolio and supported passenger types for provided products."
          schema:
            $ref: "#/definitions/ProductQueryResponse"

  /availability:
    post:
      tags:
      - "availability"
      summary: "Trip availaibility inquiry"
      description: "API to inquire trip availabilities from transport operator."
      operationId: "availability"
      consumes:
      - "application/json"
      - "application/xml"
      produces:
      - "application/json"
      - "application/xml"
      parameters:
      - in: header
        name: X-Message-Id
        type: string
        required: true
        description: "Unique message identification that is used for error situations. Every client implementation will create its own message ids."
      
      - in: header
        name: X-Transaction-Id
        type: string
        required: true
        description: "Unique transaction identification that is used for error situations. \
                      Value is generated by original requestor and used in every message related to same ticket transaction."
      - in: header
        name: X-Initiator
        type: string
        required: true
        description: "Text indentification of original requestor. Value is use for error situations."

      - in: header
        name: Accept-Language
        type: string
        required: true
        description: "Language value like specified in [RFC 2616](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4). \
                        Value is used to localize response values."

      - in: header
        name: Authorization
        type: string
        required: true
        description: "[JWT](https://jwt.io/) authentication token for authorization requests."

      - in: "body"
        name: "body"
        description: "Availability search terms"
        required: true
        schema:
          $ref: "#/definitions/AvailabilityRequest"
      responses:
        200:
          description: "Returns free transport service capability with given search terms."
          schema:
            $ref: "#/definitions/AvailabilityResponse"

  /reservation:
    post:
      tags:
      - "reservation"
      summary: "Travel reservation"
      description: "An interface that allows operators to make travel reservations from a transport service."
      operationId: "reservation"
      consumes:
      - "application/json"
      - "application/xml"
      produces:
      - "application/json"
      - "application/xml"
      parameters:
      - in: header
        name: X-Message-Id
        type: string
        required: true
        description: "Unique message identification that is used for error situations. Every client implementation will create its own message ids."
      
      - in: header
        name: X-Transaction-Id
        type: string
        required: true
        description: "Unique transaction identification that is used for error situations. \
                      Value is generated by original requestor and used in every message related to same ticket transaction."
      - in: header
        name: X-Initiator
        type: string
        required: true
        description: "Text indentification of original requestor. Value is use for error situations."
  
      - in: header
        name: Accept-Language
        type: string
        required: true
        description: "Language value like specified in [RFC 2616](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html#sec14.4). \
                        Value is used to localize response values."

      - in: header
        name: Authorization
        type: string
        required: true
        description: "[JWT](https://jwt.io/) authentication token for authorization requests."

      - in: "body"
        name: "body"
        description: "Reservation information"
        required: true
        schema:
          $ref: "#/definitions/ReservationRequest"
      responses:
        200:
          description: "Returns the ticket-payloads generated by the transport service and the corresponding booking data."
          schema:
            $ref: "#/definitions/ReservationResponse"

  /reservation/{caseId}:
    delete:
      tags:
      - "reservation"
      summary: "Cancelletion of transport reservation"
      description: ""
      operationId: "reservationDelete"
      consumes:
      - "application/json"
      - "application/xml"
      produces:
      - "application/json"
      - "application/xml"
      parameters:
      - in: header
        name: X-Message-Id
        type: string
        required: true
        description: "Unique message identification that is used for error situations. Every client implementation will create its own message ids."
      
      - in: header
        name: X-Transaction-Id
        type: string
        required: true
        description: "Unique transaction identification that is used for error situations. \
                      Value is generated by original requestor and used in every message related to same ticket transaction."
      - in: header
        name: X-Initiator
        type: string
        required: true
        description: "Text indentification of original requestor. Value is use for error situations."

      - in: header
        name: Authorization
        type: string
        required: true
        description: "[JWT](https://jwt.io/) authentication token for authorization requests."

      - in: path
        name: caseId
        description: "A case identifier for a reservation that will be removed"
        required: true
        type: string
      responses:
        200:
          description: "Returns an acknowledgment of a successful cancellation"
          schema:
            type: boolean
        404:
          description: "No valid booking with given case identifier."

# -----------------------------------------------------
# REQUEST AND RESPONSE DEFINITIONS
# -----------------------------------------------------

definitions:

  AuthenticationRequest:
    type: object
    required:
      - data
      - pubKeyId
      - cnonce
      - alg
    properties:
      data:
        type: string
        description: "A cryptographically signed message. Compiled by merging the nonce + client nonce server \
                      into a single long string. The server has base64 encoded its own value. The client end \
                      can do the encoding they want as it is used as part of the verification process."
      pubKeyId:
        type: string
        description: "The server identifier for the Public Key"
      cnonce:
        type: string
        description: "The cryptographic nonce value created by client"
      alg:
        type: string
        description: "The algorithm to sign message **data**."
        enum:
        - RSA+SHA256
        - ECDSA

  ProductQueryResponse:
    type: object
    required:
      - products
      - passengerCategories
    properties:
      products:
        $ref: "#/definitions/ProductList"
      passengerCategories:
        type: array
        items:
          type: string
    example:
      - products:
        - productType: "PRODUCT-SINGLE-TICKET"
          contract: "CONTRACT-AB123CD"
          name: "Single ticket"
          description: "The validity of a single ticket starts at the time of purchase. The validity period will be \
                        printed to the ticket. "
          validFrom: "2017-08-22T07:20:04.474Z"
          validTo: "2018-08-23T07:20:04.474Z"
          suitablePassengerCategories: ["Adult", "Child", "Youth", "Senior"]
        - productType: "PRODUCT-SEASON-TICKET"
          contract: "CONTRACT-AB123CD"
          name: "Season ticket"
          description: ""
          validFrom: "2017-08-22T07:00:00.000Z"
          validTo: "2018-08-23T07:04:00.000Z"
          suitablePassengerCategories: ["Adult", "Youth"]
        passengerCategories: ["Adult", "Child", "Youth", "Senior"]

  AvailabilityRequest:
    type: object
    properties:
      contract:
        type: string
        description: "Contract identifier"
      travel:
        $ref: "#/definitions/Travel"
      passengers:
        type: array
        items:
          type: string
    example:
      - contract: "CONTRACT-AB123CD"
        travel:
          productType: "PRODUCT-SINGLE-TICKET"
          dateTime: "2017-08-23T07:20:04.474Z"
          from:
            lat: 60.2
            lon: 24.8
            description: "Kauppatori, Mikkeli"
          to:
            id: "MATKA:181342"
            description: "Lahti Matkakeskus C"
        passengers: ["Adult", "Adult", "Child"]


  AvailabilityResponse:
    type: object
    required:
      - contract
      - travel
      - availability
    properties:
      contract:
        type: string
        description: "Contract identifier"
      travel:
        $ref: "#/definitions/Travel"
      availability:
        type: array
        items:
          $ref: "#/definitions/TravelAvailability"
    example:
      - contract: "CONTRACT-AB123CD"
        travel:
          productType: "PRODUCT-SINGLE-TICKET"
          dateTime: "2017-08-23T07:20:04.474Z"
          from:
            lat: 60.2
            lon: 24.8
            description: "Kauppatori, Mikkeli"
          to:
            id: "MATKA:181342"
            platform: "Laituri 7"
            description: "Lahti Matkakeskus C"
        availability:
          - reservationData: "InRyYXZlbCI6IFsNCiAgICB7DQogICAgICAidHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgImRlc2NyaXB0aW9uIjogIkthdXB1bmdpbnRhbG8sIExhaHRpIg0KICAgICAgfSwNCiAgICAgICJ0byI6IHsNCiAgICAgICAgImxhdCI6IDYxLjQsDQogICAgICAgICJsb24iOiAyMC40LA0KICAgICAgICAiZGVzY3JpcHRpb24iOiAiSGVpbm9sYSINCiAgICAgIH0sDQogICAgICAicHJvZHVjdFR5cGUiOiAiUFJPRFVDVC1TSU5HTEUtVElDS0VUIiwNCiAgICAgICJkYXRlVGltZSI6ICIyMDE3LTA4LTIzVDA3OjIwOjA0LjQ3NFoiDQogICAgfQ=="
            validTo: "2017-08-22T13:04:04.534Z"
            fare:
              currency: "EUR"
              amount: 13
              vatPercent: 10
            transport:
              operator: "Liikennöitsijä OY AB (Y-1234567)"
              vehicleInfo: "Linja-auto Mikkeli-Lahti"
              seatInfo: "Istumapaikka 45"
            applicableForPassengers: ["Adult"]
          - reservationData: "XXXXXXXXIFsNCiAgICB7DQogICAgICAidHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgImRlc2NyaXB0aW9uIjogIkthdXB1bmdpbnRhbG8sIExhaHRpIg0KICAgICAgfSwNCiAgICAgICJ0byI6IHsNCiAgICAgICAgImxhdCI6IDYxLjQsDQogICAgICAgICJsb24iOiAyMC40LA0KICAgICAgICAiZGVzY3JpcHRpb24iOiAiSGVpbm9sYSINCiAgICAgIH0sDQogICAgICAicHJvZHVjdFR5cGUiOiAiUFJPRFVDVC1TSU5HTEUtVElDS0VUIiwNCiAgICAgICJkYXRlVGltZSI6ICIyMDE3LTA4LTIzVDA3OjIwOjA0LjQ3NFoiDQogICAgfQ=="
            validTo: "2017-08-22T13:04:04.534Z"
            fare:
              currency: "EUR"
              amount: 13
              vatPercent: 10
            transport:
              operator: "Liikennöitsijä OY AB (Y-1234567)"
              vehicleInfo: "Linja-auto Mikkeli-Lahti"
              seatInfo: "Istumapaikka 46"
            applicableForPassengers: ["Adult"]
          - reservationData: "YYYYYYYYYIFsNCiAgICB7DQogICAgICAidHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgImRlc2NyaXB0aW9uIjogIkthdXB1bmdpbnRhbG8sIExhaHRpIg0KICAgICAgfSwNCiAgICAgICJ0byI6IHsNCiAgICAgICAgImxhdCI6IDYxLjQsDQogICAgICAgICJsb24iOiAyMC40LA0KICAgICAgICAiZGVzY3JpcHRpb24iOiAiSGVpbm9sYSINCiAgICAgIH0sDQogICAgICAicHJvZHVjdFR5cGUiOiAiUFJPRFVDVC1TSU5HTEUtVElDS0VUIiwNCiAgICAgICJkYXRlVGltZSI6ICIyMDE3LTA4LTIzVDA3OjIwOjA0LjQ3NFoiDQogICAgfQ=="
            validTo: "2017-08-22T13:04:04.534Z"
            fare:
              currency: "EUR"
              amount: 7.5
              vatPercent: 10
            transport:
              operator: "Liikennöitsijä OY AB (Y-1234567)"
              vehicleInfo: "Linja-auto Mikkeli-Lahti"
              seatInfo: "Istumapaikka 47"
            applicableForPassengers: ["Child"]
            extraServices:
              - title: "Lastenistuin"
                description: "Erillinen lasten turvaistuin matkalle"
                extraServiceReservationData: "EXTRA-CHILD-SEAT-115311"
                fare:
                  currency: "EUR"
                  amount: 4
                  vatPercent: 10

  ReservationRequest:
    type: object
    properties:
      reservations:
        type: array
        items:
          type: object
          properties:
            reservationData:
              type: string
              description: "Reservation data from availability response"
            customerInfo:
              type: array
              items:
                $ref: "#/definitions/CustomerInfo"
            chosenExtraReservationDatas:
              type: array
              description: "Reservation data of chosen extra services."
              items:
                type: string
    example:
      - reservations:
        - reservationData: "InRyYXZlbCI6IFsNCiAgICB7DQogICAgICAidHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgIm"
          customerInfo:
            name: "Matti Matkustaja"
            phone: "+3584444444"
            email: "matti.matkustaja@sahkoposti.fi"
        - reservationData: "XXXXXXXXXXXXXXXXXdHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgIm"
        - reservationData: "YYYYYYYYYYYYYYYYYYB7DQogICAgICAidHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgIm"

  ReservationResponse:
    type: object
    properties:
      caseId:
        type: string
        description: "Transaction case id. Eg. can be used to map payment clearing to ticket transactions."
      confirmedReservations:
        type: array
        items:
          type: object
          properties:
            reservationData:
              type: string
              description: "Reservation data"
            ticketPayload:
              type: string
              description: "Ticket payload. Format is agreed by API partners."
            validFrom:
              type: string
              format: "date-time"
              description: "Ticket payload valid from datetime. Ticket payload cannot be used outside of validity period."
            validTo:
              type: string
              format: "date-time"
              description: "Ticket payload valid to datetime. Ticket payload cannot be used outside of validity period."
    example:
      - caseId: "FIRMA/12345/2017"
        confirmedReservations:
          - reservationData: "InRyYXZlbCI6IFsNCiAgICB7DQogICAgICAidHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgIm"
            ticketPayload: "dGlja2V0IHBheWxvYWQ="
            validFrom: "2017-08-23T07:00:00"
            validTo: "2017-08-23T08:00:00"
          - reservationData: "XXXXXXXXXXXXXXXXXdHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgIm"
            ticketPayload: "dGlja2V0IHBheWxvYWQgMQ=="
            validFrom: "2017-08-23T07:00:00"
            validTo: "2017-08-23T08:00:00"
          - reservationData: "YYYYYYYYYYYYYYYYYYB7DQogICAgICAidHJhdmVsVHlwZSI6ICJDb29yZGluYXRlQmFzZWRUcmF2ZWwiLA0KICAgICAgImZyb20iOiB7DQogICAgICAgICJsYXQiOiA2MC4yLA0KICAgICAgICAibG9uIjogMjQuOCwNCiAgICAgICAgIm"
            ticketPayload: "dGlja2V0IHBheWxvYWQgMg=="
            validFrom: "2017-08-23T07:00:00"
            validTo: "2017-08-23T08:00:00"


# -----------------------------------------------------
# OBJECTS
# -----------------------------------------------------

  Transport:
    type: object
    required:
      - operator
      - vehicleInfo
    properties:
      operator:
        type: string
        description: "Name of the transport operator"
      vehicleInfo:
        type: string
        description: "Description of transport operator."
      seatInfo:
        type: string
        description: "Seat information details of transport vehicle."

  AccountId:
    type: object
    required:
      - account
    properties:
      account:
        type: string

  AuthToken:
    type: string

  CustomerInfo:
    type: object
    description: "Voluntarily provided contact information from passenger, eg. in the event of a possible disturbance."
    properties:
      name:
        type: string
        description: "Passenger name"
      phone:
        type: string
        description: "Passenger phone number"
      email:
        type: string
        format: email
        description: "Passenger email address"

  ProductList:
    type: array
    items:
      $ref: "#/definitions/ProductDescription"

  Product:
    type: object
    required:
      - productType
      - contract
      - name
    properties:
      productType:
        type: string
        description: "Unique product identification."
      contract:
        type: string
        description: "Contract identifier"
      name:
        type: string
        description: "Product name"
      description:
        type: string
        description: "Product desdription"
      validFrom:
        type: string
        format: "date-time"
        description: "Starting datetime of product validity. If value is not given, current datetime is used."
      validTo:
        type: string
        format: "date-time"
        description: "End datetime of product validity. If value is not given, product is valid indefinitely."

  ProductDescription:
    type: object
    required:
      - suitablePassengerCategories
    allOf:
      - $ref: "#/definitions/Product"
      - type: object
        properties:
          suitablePassengerCategories:
            type: array
            description: "Passenger types that are able to use related product. Values must match returned values of products response."
  
            items:
              type: string

  ProductFare:
    type: object
    required:
      - currency
      - amount
      - vatPercent
    properties:
      currency:
        type: string
        description: "Currency code in [ISO 4217](https://en.wikipedia.org/wiki/ISO_4217) format."
      amount:
        type: number
        format: double
        description: "Total price of offered service."
      vatPercent:
        type: number
        format: int32
        description: "VAT percentage of offered service."

  TravelAvailability:
    type: object
    required:
      - contract
      - reservationData
      - validTo
      - transport
      - applicableForPassengers
      - extraServices
    allOf:
      - type: object
        properties:
          reservationData:
            type: string
            description: "Ticket supply information provided by the transportation service. With this information transport service \
                          is able to identify offered service. Content can be database sequence, calculated identifier or \
                          crypted capacity data that after decryption describes ordered service to transportation operator. \
                          This alone should be enough to identify where and when passenger wants to go, and what kind of product he/she is using."
          validTo:
            type: string
            format: "date-time"
            description: "End datetime of capacity offer validity. Offered capacity cannot be used outside of validity."
          fare:
            $ref: "#/definitions/ProductFare"
          transport:
            $ref: "#/definitions/Transport"
          applicableForPassengers:
            type: array
            description: "Reference to passenger categories given in availability request."
            items:
              type: string
          extraServices:
            type: array
            items:
              $ref: "#/definitions/ExtraService"

  ExtraService:
    type: object
    required:
      - title
      - extraServiceReservationData
      - fare
    properties:
      title:
        type: string
      description:
        type: string
      extraServiceReservationData:
        type: string
        description: "Kuljetuspalvelun tuottama varaustieto, sisältö sellainen jonka perusteella kuljetuspalvelu
                      pystyy yksilöllisesti muodostamaan halutun lisäpalvelun tiedot siten, että se voidaan tarvittaessa
                      sitoa juuri tiettyyn tarjottuun matkustusoikeuteen mukaan. Kaikkien erikoispalveluiden kohdalla
                      tämän tasoinen sitominen ei ole tarpeen (esim. lastenistuin taksiin), mutta osaan kylläkin
                      (esim. ateria lennolla). Se, että onko tämä tieto kuinka spesifisti sidottu jätetään
                      kuljetuspalvelun toteutuksen vastuulle, kutsuvan osapuolen ei tule joutua välittämään siitä vaan
                      heidän tehtäväkseen jää vain toimittaa tämän kentän arvo sellaisenaan tilauksen yhteydessä jos
                      lisäpalvelu on valittu mukaan."
      fare:
        $ref: "#/definitions/ProductFare"

  Travel:
    type: object
    required:
      - contract
      - productType
      - dateTime
    properties:
      productType:
        type: string
        description: "Availability/Product kyselyn vastauksena tulleen tuotteen tunnus."
      dateTime:
          type: string
          format: "date-time"
          description: "Datetime when transport service will or when customer wants to depart. This depends whether transport service is public transport or Demand Response Transport (DRT) service."
      serviceId:
        type: string
        description: "Identifier for specific transport operator service. With this value requestor can prefer certain timetable departure/service."
      from:
        oneof:
          - $ref: "#/definitions/CoordinateLocation"
          - $ref: "#/definitions/StopLocation"
      to:
        oneof:
          - $ref: "#/definitions/CoordinateLocation"
          - $ref: "#/definitions/StopLocation"

  StopLocation:
    type: object
    required:
      - id
    properties:
      id:
        type: string
        description: "Stop location identifier from stop registry both participants are using. Eg. Digiroad2"
      platform:
        type: string
        description: "Platform information from where service will depart. Meaningfull information in large station areas where transport service can depart from multiple different platforms."
      description:
        type: string
        description: "Stop location description text."

  CoordinateLocation:
    type: object
    required:
      - lat
      - lon
    properties:
      lat:
        type: number
        format: double
        description: "Location coordinate latitude value in WGS-84 coordinatesystem."
      lon:
        type: number
        format: double
        description: "Location coordinate longitude value in WGS-84 coordinatesystem."
      description:
        type: string
        description: ""

